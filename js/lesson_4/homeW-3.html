<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Header!</h1>
<script>
    "use strict";

    let tasks = [];
    tasks[0] = ['Какая буква является перевой в английском алфавите?','a','b','c','d','a'];
    tasks[1] = ['Какая буква является второй в английском алфавите?','a','b','c','d','b'];
    tasks[2] = ['Какая буква является третьей в английском алфавите?','a','b','c','d','c'];
    tasks[3] = ['Какая буква является четвертой в английском алфавите?','a','b','c','d','d'];
    tasks[4] = ['Какая буква является пятой в английском алфавите?','b','c','d','e','d'];

    /**
     * Объект с настройками игры.
     * @property {int} taskNumbers Количество вопросов.
     */
    const settings = {
        taskNumbers: 5,
        answerVar: [['a','A','1'],['b','B','2'],['c','C','3'],['d','D','4']]
    };


    const task = {
        settings,
        number: null,
        question: "",
        answA: "",
        answB: "",
        answC: "",
        answD: "",
        rightAnsw: "",

        getTask(){
            let count = 0;
            for (let i = 0; i <= this.settings.taskNumbers; i++){
                for (let i = 0; i<=5; i++) {
                    switch (i) {
                        case 0:
                            prompt(`Введите вопрос`);
                            break;
                        case 1:
                            prompt(`Введите 1 вариант ответа`);
                            break;
                        case 2:
                            prompt(`Введите 2 вариант ответа`);
                            break;
                        case 3:
                            prompt(`Введите 3 вариант ответа`);
                            break;
                        case 4:
                            prompt(`Введите 4 вариант ответа`);
                            break;
                        case 5:
                            prompt(`Введите правильный вариант ответа`);
                            break;
                    }
                }
            }

        },

        /**
         * Инициализация вопроса и его ответов.
         */
        init(task,count) {
            this.number = count;
            this.question = task[0];
            this.answA = task[1];
            this.answB = task[2];
            this.answC = task[3];
            this.answD = task[4];
            this.rightAnsw = task[5];
        },

        /**
         * Выводим окно с вопросом, для получения варианта ответа
         */
        getAnswer(){
          return prompt(`Вопрос:
          ${this.question}.\nВыберите 1 из вариантов ответа:
          A: ${this.answA}
          B: ${this.answB}
          C: ${this.answC}
          D: ${this.answD}  `)
        },

        /**
         * Проверяем соответствует ли переданный ответ заданному
         * @param answ Переданый вариант ответа
         * @returns {boolean} возвращаем True если переданный вариант верен
         */
        checkAnswer(answ){
            switch (answ){
                case 'a':
                case 'A':
                case '1':
                    return this.settings.answerVar[0].includes(this.rightAnsw);
                case 'b':
                case 'B':
                case '2':
                    return this.settings.answerVar[1].includes(this.rightAnsw);
                case 'c':
                case 'C':
                case '3':
                    return this.settings.answerVar[2].includes(this.rightAnsw);
                case 'd':
                case 'D':
                case '4':
                    return this.settings.answerVar[3].includes(this.rightAnsw);
            }
            return false;
        },

        /**
         * Сбрасываем вопрос
         */
        reset(){
            this.number = null;
            this.question = "";
            this.answA = "";
            this.answB = "";
            this.answC = "";
            this.answD = "";
            this.rightAnsw = "";
        },

    };

    /**
     * Объект игры, здесь будут все методы и свойства связанные с самой игрой в общем.
     * @property {settings} settings Настройки игры.
     * @property {player} player Игрок, участвующий в игре.
     */
    const game = {
        task,
        settings,
        taskCount: 0,
        cash: 0,

        /**
         * Запускает игру.
         */
        run() {

            if (confirm(`Вас приветствует игра - Кто хочет стать миллонером \nХотите начать игру?`)){
                alert(`Правила игры:
                Вам будет задан ряд вопросов, с вариантами ответов;
                Чтобы дать ответ - введите литеру варианта или порядковый номер варианта;
                Для выхода введите - 0;`)
                // Бесконечный цикл
                while (true) {

                    // Инициализируем вопроса
                    if (task.number !== this.taskCount){
                        task.init(tasks[this.taskCount],this.taskCount)
                    }

                    // Спрашиваем ответ
                    let answer = task.getAnswer();

                    // Если игрок сказал что хочет выйти (набрал -1), значит выходим.
                    if (answer === "0") {
                        alert('До свидания.');
                        return;
                    }else if (!((answer>='a' && answer<='d') ||
                                (answer>='A' && answer<='D') || (answer>='1' && answer<='4'))) {
                        alert('Необходимо ввести ответ в символьном виде [a,b,c,d] или [A,B,C,D],' +
                            ' так же можете ввести ответ в числовом варианте [1-4], для выхода введите 0.');
                        continue;
                    }

                    // Проверяем введенный ответ
                    if (task.checkAnswer(answer)){
                        this.taskCount++;
                        this.cash += 500;
                        if (this.taskCount < this.settings.taskNumbers){
                            alert(`Поздравляем, вы ответили правильно на вопрос № ${this.taskCount},
ваш выигрыш составляет ${this.cash}!`);
                        } else if (confirm(`Поздравляем, вы ответили правильно на все вопросы и заработали ${this.cash} рублей!
Хотите сыграть еще раз?`)){
                            this.reset();
                        }
                    }else if(confirm(`Вы дали не правильный ответ, игра закончена.
Вы ответили правильно на ${this.taskCount} ${this.getDec(this.taskCount)} и заработали ${this.cash} рублей!.
Хотите сыграть еще раз?`)){
                        this.reset();
                    }

                }
            }
        },

        /**
         * Сбрасываем состояние игры
         */
        reset(){
          this.taskCount = 0;
          this.cash = 0;
          task.reset();
        },

        /**
         * Выводим нужное сколнение слова для переданного счетчика
         * @param count переданный счетчик
         * @returns {string} Возвращает правильное склонение
         */
        getDec(count) {
        if (parseInt(count / 10 % 10) === 1){
            return 'вопросов';
        } else {
            switch (count % 10) {
                case 1:
                    return 'вопрос';
                case 2:
                case 3:
                case 4:
                    return 'вопроса';
                default:
                    return 'вопросов';
            }
        }
    }

    };

    // Запускаем игру.
    game.run();


</script>
</body>
</html>